<!DOCTYPE html>
<html>
  <head>
    <title>Stock Dashboard</title>
    <meta charset="utf-8" />
  </head>
  <body>
    <div id="app"></div>

    <!-- React + Babel (same as your example) -->
    <script src="react/react.js"></script>
    <script src="react/react-dom.js"></script>
    <script src="react/babel.js"></script>

    <script type="text/babel">

      const useState = React.useState;
      const useEffect = React.useEffect;

      function App() {
        // Four stocks stored in one state object
        const [stocks, setStocks] = useState({
          AMZN: { ticker: "AMZN", name: "Amazon", price: 0, volume: 0 },
          IBM: { ticker: "IBM", name: "IBM", price: 0, volume: 0 },
          DOW: { ticker: "DOW", name: "Dow Chemical", price: 0, volume: 0 },
          NASDAQ: { ticker: "NASDAQ", name: "Nasdaq Index", price: 0, volume: 0 }
        });

        useEffect(() => {
          const eventSource = new EventSource("http://localhost:31415/events");

          eventSource.onmessage = (event) => {
            const data = JSON.parse(event.data);  // {ticker, name, price, volume}

            setStocks(prev => ({
              ...prev,
              [data.ticker]: data
            }));
          };

          return () => eventSource.close();
        }, []);

        // Render table rows
        const rows = Object.keys(stocks).map((t) => {
          const s = stocks[t];
          return (
            <tr key={t}>
              <td>{s.ticker}</td>
              <td>{s.name}</td>
              <td>${s.price}</td>
              <td>{s.volume}</td>
            </tr>
          );
        });

        return (
          <div>
            <h1>Live Stock Dashboard (SSE)</h1>
            <table border="1" cellpadding="6">
              <thead>
                <tr>
                  <th>Ticker</th>
                  <th>Name</th>
                  <th>Price</th>
                  <th>Volume</th>
                </tr>
              </thead>
              <tbody>
                {rows}
              </tbody>
            </table>
          </div>
        );
      }

      // Render
      ReactDOM.render(<App />, document.getElementById("app"));

    </script>
  </body>
</html>
